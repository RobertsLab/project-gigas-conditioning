std_error = sd(proportion_remaining)/sqrt(length(proportion_remaining)),
.groups = 'drop')
means_prop <- rbind(means_B_prop, means_D_prop)
means_prop$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_prop$conditioning <- c("d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control", "daily","daily","daily","daily","daily","daily","daily","daily","daily","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly")
ggplot(means_prop, aes(x = date, y = mean_prop, group = effort, color = conditioning)) +
geom_point(size=3) +
labs(x = "Date",
y = "Mean proportion of oysters remaining per bag") +
scale_color_manual(labels = c("Daily Control", "Daily", "Weekly Control", "Weekly"), values = c("blue", "red", "green", "purple"))+
labs(color = "Conditioning")+
geom_errorbar(aes(ymin=mean_prop-std_error, ymax=mean_prop+std_error), width=.2,
position=position_dodge(0.05))+
theme_classic()
ggplot(D_survival, aes(x=date, y=proportion_remaining, color=conditioning))+
geom_jitter() +
theme_classic()+
ylab("Proportion of oysters remaining")+
xlab("Date")+
labs(color= "Conditioning")+
scale_color_manual(labels = c("Control", "Weekly"),values = c("green", "purple"))
ggplot(B_survival, aes(x=date, y=proportion_remaining, color=conditioning))+
geom_jitter() +
theme_classic()+
ylab("Proportion of oysters remaining")+
xlab("Date")+
labs(color = "Conditioning")+
scale_color_manual(labels = c("Control", "Daily"),values = c("blue", "red"))
library(readxl)
library(tidyverse)
library(ggplot2)
# B survival
B_survival <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/B_survival_08292024.xlsx")
# D survival
D_survival <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/D_survival_08292024.xlsx")
means_B_live <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_D_live <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_live <- rbind(means_B_live, means_D_live)
means_live$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_B_live <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_D_live <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_live <- rbind(means_B_live, means_D_live)
means_live$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_live$conditioning <- c("d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control", "daily","daily","daily","daily","daily","daily","daily","daily","daily","daily","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly")
ggplot(means_live, aes(x = date, y = mean_survival, group = effort, color = conditioning)) +
geom_point(size=3) +
labs(x = "Date",
y = "Mean live oysters per bag") +
scale_color_manual(labels = c("Daily Control", "Daily", "Weekly Control", "Weekly"), values = c("blue", "red", "green", "purple"))+
labs(color = "Conditioning")+
geom_errorbar(aes(ymin=mean_survival-std_error, ymax=mean_survival+std_error), width=.2,
position=position_dodge(0.05))+
theme_classic()
ggplot(D_survival, aes(x = date, y = alive_num, group = effort, color = conditioning)) +
geom_jitter(width = 10, height = 0, size=3) +
labs(x = "Date",
y = "Live oysters per bag") +
scale_color_manual(labels = c("Control", "Weekly"), values = c("green","purple"))+
labs(color = "Conditioning")+
theme_classic()+
ylim(0,120)
ggplot(B_survival, aes(x = date, y = alive_num, group = effort, color = conditioning)) +
geom_jitter(width = 10, height = 0,size=3) +
labs(x = "Date",
y = "Live oysters per bag") +
scale_color_manual(labels = c("Control", "Daily"), values = c("blue","red"))+
labs(color = "Conditioning")+
theme_classic()+
ylim(0,55)
B_survival <- B_survival %>%
group_by(conditioning, bag_num) %>%
arrange(date)%>%
mutate(cumulative_deaths = cumsum(dead)) %>%
ungroup()
D_survival <- D_survival %>%
group_by(conditioning, bag_num) %>%
arrange(date)%>%
mutate(cumulative_deaths = cumsum(dead)) %>%
ungroup()
ggplot(B_survival, aes(x=date, y=cumulative_deaths, color=conditioning))+
geom_jitter(height = 0.3) +
theme_classic()+
ylab("Cumulative dead oysters found")+
xlab("Date")+
labs(color = "Conditioning")+
scale_color_manual(labels = c("Control", "Daily"),values = c("blue", "red"))+
ylim(-0.5,6)
ggplot(D_survival, aes(x=date, y=cumulative_deaths, color=conditioning))+
geom_jitter(height = 0.2) +
theme_classic()+
ylab("Cumulative dead oysters found")+
xlab("Date")+
labs(color= "Conditioning")+
scale_color_manual(labels = c("Control", "Weekly"),values = c("green", "purple"))
means_B_cumdead <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_cumdead = mean(cumulative_deaths),
std_error = sd(cumulative_deaths)/sqrt(length(cumulative_deaths)),
.groups = 'drop')
means_D_cumdead <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_cumdead = mean(cumulative_deaths),
std_error = sd(cumulative_deaths)/sqrt(length(cumulative_deaths)),
.groups = 'drop')
means_cumdead <- rbind(means_B_cumdead, means_D_cumdead)
means_cumdead$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_cumdead$conditioning <- c("d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control", "daily","daily","daily","daily","daily","daily","daily","daily","daily","daily","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly")
ggplot(means_cumdead, aes(x = date, y = mean_cumdead, group = effort, color = conditioning)) +
geom_point(size=3) +
labs(x = "Date",
y = "Mean cumulative dead oysters per bag") +
scale_color_manual(labels = c("Daily Control", "Daily", "Weekly Control", "Weekly"), values = c("blue", "red", "green", "purple"))+
labs(color = "Conditioning")+
geom_errorbar(aes(ymin=mean_cumdead-std_error, ymax=mean_cumdead+std_error), width=.2,
position=position_dodge(0.05))+
theme_classic()
initial_counts <- B_survival %>%
group_by(conditioning, bag_num) %>%
summarize(initial_count = first(alive_num)) %>%
ungroup()
# Join the initial counts back to the original dataframe
B_survival <- B_survival %>%
left_join(initial_counts, by = c("conditioning", "bag_num"))
# Calculate the proportion of organisms remaining alive at each timepoint
B_survival <- B_survival %>%
mutate(proportion_remaining = alive_num / initial_count)
initial_counts <- D_survival %>%
group_by(conditioning, bag_num) %>%
summarize(initial_count = first(alive_num)) %>%
ungroup()
# Join the initial counts back to the original dataframe
D_survival <- D_survival %>%
left_join(initial_counts, by = c("conditioning", "bag_num"))
# Calculate the proportion of organisms remaining alive at each timepoint
D_survival <- D_survival %>%
mutate(proportion_remaining = alive_num / initial_count)
means_B_prop <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_prop = mean(proportion_remaining),
std_error = sd(proportion_remaining)/sqrt(length(proportion_remaining)),
.groups = 'drop')
means_D_prop <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_prop = mean(proportion_remaining),
std_error = sd(proportion_remaining)/sqrt(length(proportion_remaining)),
.groups = 'drop')
means_prop <- rbind(means_B_prop, means_D_prop)
means_prop$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_B_prop <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_prop = mean(proportion_remaining),
std_error = sd(proportion_remaining)/sqrt(length(proportion_remaining)),
.groups = 'drop')
means_D_prop <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_prop = mean(proportion_remaining),
std_error = sd(proportion_remaining)/sqrt(length(proportion_remaining)),
.groups = 'drop')
means_prop <- rbind(means_B_prop, means_D_prop)
means_prop$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_prop$conditioning <- c("d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control", "daily","daily","daily","daily","daily","daily","daily","daily","daily","daily","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly")
ggplot(means_prop, aes(x = date, y = mean_prop, group = effort, color = conditioning)) +
geom_point(size=3) +
labs(x = "Date",
y = "Mean proportion of oysters remaining per bag") +
scale_color_manual(labels = c("Daily Control", "Daily", "Weekly Control", "Weekly"), values = c("blue", "red", "green", "purple"))+
labs(color = "Conditioning")+
geom_errorbar(aes(ymin=mean_prop-std_error, ymax=mean_prop+std_error), width=.2,
position=position_dodge(0.05))+
theme_classic()
ggplot(D_survival, aes(x=date, y=proportion_remaining, color=conditioning))+
geom_jitter() +
theme_classic()+
ylab("Proportion of oysters remaining")+
xlab("Date")+
labs(color= "Conditioning")+
scale_color_manual(labels = c("Control", "Weekly"),values = c("green", "purple"))
ggplot(B_survival, aes(x=date, y=proportion_remaining, color=conditioning))+
geom_jitter() +
theme_classic()+
ylab("Proportion of oysters remaining")+
xlab("Date")+
labs(color = "Conditioning")+
scale_color_manual(labels = c("Control", "Daily"),values = c("blue", "red"))
# B survival
B_survival <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/B_survival_09032024.xlsx")
library(readxl)
library(tidyverse)
library(ggplot2)
# B survival
B_survival <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/B_survival_09032024.xlsx")
# D survival
D_survival <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/D_survival_09032024.xlsx")
means_B_live <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_D_live <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_live <- rbind(means_B_live, means_D_live)
means_live$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_B_live <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_D_live <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_live <- rbind(means_B_live, means_D_live)
means_live$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_B_live <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_D_live <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_survival = mean(alive_num),
std_error = sd(alive_num)/sqrt(length(alive_num)),
.groups = 'drop')
means_live <- rbind(means_B_live, means_D_live)
means_live$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_live$conditioning <- c("d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","daily","daily","daily","daily","daily","daily","daily","daily","daily","daily","daily","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly")
ggplot(means_live, aes(x = date, y = mean_survival, group = effort, color = conditioning)) +
geom_point(size=3) +
labs(x = "Date",
y = "Mean live oysters per bag") +
scale_color_manual(labels = c("Daily Control", "Daily", "Weekly Control", "Weekly"), values = c("blue", "red", "green", "purple"))+
labs(color = "Conditioning")+
geom_errorbar(aes(ymin=mean_survival-std_error, ymax=mean_survival+std_error), width=.2,
position=position_dodge(0.05))+
theme_classic()
ggplot(D_survival, aes(x = date, y = alive_num, group = effort, color = conditioning)) +
geom_jitter(width = 10, height = 0, size=3) +
labs(x = "Date",
y = "Live oysters per bag") +
scale_color_manual(labels = c("Control", "Weekly"), values = c("green","purple"))+
labs(color = "Conditioning")+
theme_classic()+
ylim(0,120)
View(D_survival)
ggplot(B_survival, aes(x = date, y = alive_num, group = effort, color = conditioning)) +
geom_jitter(width = 10, height = 0,size=3) +
labs(x = "Date",
y = "Live oysters per bag") +
scale_color_manual(labels = c("Control", "Daily"), values = c("blue","red"))+
labs(color = "Conditioning")+
theme_classic()+
ylim(0,55)
ggplot(B_survival, aes(x=date, y=cumulative_deaths, color=conditioning))+
geom_jitter(height = 0.3) +
theme_classic()+
ylab("Cumulative dead oysters found")+
xlab("Date")+
labs(color = "Conditioning")+
scale_color_manual(labels = c("Control", "Daily"),values = c("blue", "red"))+
ylim(-0.5,6)
B_survival <- B_survival %>%
group_by(conditioning, bag_num) %>%
arrange(date)%>%
mutate(cumulative_deaths = cumsum(dead)) %>%
ungroup()
D_survival <- D_survival %>%
group_by(conditioning, bag_num) %>%
arrange(date)%>%
mutate(cumulative_deaths = cumsum(dead)) %>%
ungroup()
ggplot(B_survival, aes(x=date, y=cumulative_deaths, color=conditioning))+
geom_jitter(height = 0.3) +
theme_classic()+
ylab("Cumulative dead oysters found")+
xlab("Date")+
labs(color = "Conditioning")+
scale_color_manual(labels = c("Control", "Daily"),values = c("blue", "red"))+
ylim(-0.5,6)
ggplot(D_survival, aes(x=date, y=cumulative_deaths, color=conditioning))+
geom_jitter(height = 0.2) +
theme_classic()+
ylab("Cumulative dead oysters found")+
xlab("Date")+
labs(color= "Conditioning")+
scale_color_manual(labels = c("Control", "Weekly"),values = c("green", "purple"))
means_B_cumdead <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_cumdead = mean(cumulative_deaths),
std_error = sd(cumulative_deaths)/sqrt(length(cumulative_deaths)),
.groups = 'drop')
means_D_cumdead <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_cumdead = mean(cumulative_deaths),
std_error = sd(cumulative_deaths)/sqrt(length(cumulative_deaths)),
.groups = 'drop')
means_cumdead <- rbind(means_B_cumdead, means_D_cumdead)
means_cumdead$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_B_cumdead <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_cumdead = mean(cumulative_deaths),
std_error = sd(cumulative_deaths)/sqrt(length(cumulative_deaths)),
.groups = 'drop')
means_D_cumdead <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_cumdead = mean(cumulative_deaths),
std_error = sd(cumulative_deaths)/sqrt(length(cumulative_deaths)),
.groups = 'drop')
means_cumdead <- rbind(means_B_cumdead, means_D_cumdead)
means_cumdead$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_cumdead$conditioning <- c("d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","daily","daily","daily","daily","daily","daily","daily","daily","daily","daily","daily","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly")
ggplot(means_cumdead, aes(x = date, y = mean_cumdead, group = effort, color = conditioning)) +
geom_point(size=3) +
labs(x = "Date",
y = "Mean cumulative dead oysters per bag") +
scale_color_manual(labels = c("Daily Control", "Daily", "Weekly Control", "Weekly"), values = c("blue", "red", "green", "purple"))+
labs(color = "Conditioning")+
geom_errorbar(aes(ymin=mean_cumdead-std_error, ymax=mean_cumdead+std_error), width=.2,
position=position_dodge(0.05))+
theme_classic()
initial_counts <- B_survival %>%
group_by(conditioning, bag_num) %>%
summarize(initial_count = first(alive_num)) %>%
ungroup()
# Join the initial counts back to the original dataframe
B_survival <- B_survival %>%
left_join(initial_counts, by = c("conditioning", "bag_num"))
# Calculate the proportion of organisms remaining alive at each timepoint
B_survival <- B_survival %>%
mutate(proportion_remaining = alive_num / initial_count)
initial_counts <- D_survival %>%
group_by(conditioning, bag_num) %>%
summarize(initial_count = first(alive_num)) %>%
ungroup()
# Join the initial counts back to the original dataframe
D_survival <- D_survival %>%
left_join(initial_counts, by = c("conditioning", "bag_num"))
# Calculate the proportion of organisms remaining alive at each timepoint
D_survival <- D_survival %>%
mutate(proportion_remaining = alive_num / initial_count)
means_B_prop <- B_survival %>%
group_by(conditioning, date) %>%
summarise(mean_prop = mean(proportion_remaining),
std_error = sd(proportion_remaining)/sqrt(length(proportion_remaining)),
.groups = 'drop')
means_D_prop <- D_survival %>%
group_by(conditioning, date) %>%
summarise(mean_prop = mean(proportion_remaining),
std_error = sd(proportion_remaining)/sqrt(length(proportion_remaining)),
.groups = 'drop')
means_prop <- rbind(means_B_prop, means_D_prop)
means_prop$effort <- c("B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D","D")
means_prop$conditioning <- c("d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","d_control","daily","daily","daily","daily","daily","daily","daily","daily","daily","daily","daily","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","w_control","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly","weekly")
ggplot(means_prop, aes(x = date, y = mean_prop, group = effort, color = conditioning)) +
geom_point(size=3) +
labs(x = "Date",
y = "Mean proportion of oysters remaining per bag") +
scale_color_manual(labels = c("Daily Control", "Daily", "Weekly Control", "Weekly"), values = c("blue", "red", "green", "purple"))+
labs(color = "Conditioning")+
geom_errorbar(aes(ymin=mean_prop-std_error, ymax=mean_prop+std_error), width=.2,
position=position_dodge(0.05))+
theme_classic()
ggplot(D_survival, aes(x=date, y=proportion_remaining, color=conditioning))+
geom_jitter() +
theme_classic()+
ylab("Proportion of oysters remaining")+
xlab("Date")+
labs(color= "Conditioning")+
scale_color_manual(labels = c("Control", "Weekly"),values = c("green", "purple"))
ggplot(B_survival, aes(x=date, y=proportion_remaining, color=conditioning))+
geom_jitter() +
theme_classic()+
ylab("Proportion of oysters remaining")+
xlab("Date")+
labs(color = "Conditioning")+
scale_color_manual(labels = c("Control", "Daily"),values = c("blue", "red"))
git config http.postBuffer 524288000
# Chunk 1
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
# Chunk 2
library(tidyverse)
library(ggplot2)
library(survival)
library(readxl)
library(ggsurvfit)
library(gtsummary)
library(cardx)
library(cowplot)
# Chunk 3
data<-read_excel("data/survival/lab_survival/lab_survival.xlsx")
View(data)
data<-data%>%
pivot_longer(names_to="time", values_to="status", cols=`0`:`24`)%>%
mutate(time=as.numeric(time))
# Chunk 1
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
# Chunk 2
library(tidyverse)
library(ggplot2)
library(survival)
library(readxl)
library(ggsurvfit)
library(gtsummary)
library(cardx)
library(cowplot)
# Chunk 3
data<-read_excel("data/survival/lab_survival/lab_survival.xlsx")
# Chunk 4
data<-data%>%
pivot_longer(names_to="time", values_to="status", cols=`0`:`24`)%>%
mutate(time=as.numeric(time))
# Chunk 5
#control<-data%>%filter(temperature=="18C")
stress<-data%>%filter(temperature=="46C")
s2 <- survfit(Surv(time, status) ~ hardening, data = stress)
s2 <- survfit(Surv(time, status) ~ treatment, data = stress)
str(s2)
survfit2(Surv(time, status) ~ treatment+temperature, data = stress) %>%
ggsurvfit() +
labs(
x = "Hours",
y = "Survival probability"
)
summary(survfit(Surv(time, status) ~ treatment, data = stress), times = 24)
survdiff(Surv(time, status) ~ treatment, data = stress)
coxph(Surv(time, status) ~ treatment, data = stress)
coxph(Surv(time, status) ~ treatment, data = stress) %>%
tbl_regression(exp = TRUE)
plot2<-survfit2(Surv(time, status) ~ treatment, data = stress) %>%
ggsurvfit() +
labs(
x = "Hours",
y = "Survival probability",
title = "46°C"
)+
ylim(0,1)+
my_theme+
geom_text(x=10, y=0.2, label="Cox PH p=0.025")+
geom_text(x=10, y=0.15, label="Temperature vs control p=0.002")+
geom_text(x=10, y=0.10, label="All others vs control p>0.05")+
theme(legend.position="right")
my_theme<-theme_classic()
plot2<-survfit2(Surv(time, status) ~ treatment, data = stress) %>%
ggsurvfit() +
labs(
x = "Hours",
y = "Survival probability",
title = "46°C"
)+
ylim(0,1)+
my_theme+
geom_text(x=10, y=0.2, label="Cox PH p=0.025")+
geom_text(x=10, y=0.15, label="Temperature vs control p=0.002")+
geom_text(x=10, y=0.10, label="All others vs control p>0.05")+
theme(legend.position="right")
View(data)
# Chunk 1
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
# Chunk 2
if ("tidyverse" %in% rownames(installed.packages()) == 'FALSE') install.packages('tidyverse')
if ("ggplot2" %in% rownames(installed.packages()) == 'FALSE') install.packages('ggplot2')
library("ggplot2")
library("tidyverse")
# Chunk 3
data<-read_csv(file="data/outplanting/GoosePoint/growth_GoosePoint.csv")
# Chunk 4
data$field_cattle_tag<-factor(data$field_cattle_tag)
# Chunk 5
data$dead[is.na(data$dead)] <- 0
data$stuck[is.na(data$stuck)] <- 0
# Chunk 6
metadata<-read_csv(file="data/outplanting/GoosePoint/bag_list_GoosePoint.csv")
metadata$field_cattle_tag<-factor(metadata$field_cattle_tag)
data$treatment<-metadata$treatment[match(data$field_cattle_tag, metadata$field_cattle_tag)]
# Chunk 7
hist(data$length.mm)
hist(data$width.mm)
hist(data$depth.mm)
plot1<-data%>%
ggplot(aes(x=field_cattle_tag, y=length.mm, fill = treatment)) +
geom_boxplot(width=.5, outlier.shape= NA, position = position_dodge(width = 0.4)) +
geom_point(pch = 21, position=position_jitterdodge(dodge.width=0.4)) +
xlab("Bag") +
theme_classic(); plot1
plot2<-data%>%
ggplot(aes(x=field_cattle_tag, y=width.mm, fill = treatment)) +
geom_boxplot(width=.5, outlier.shape= NA, position = position_dodge(width = 0.4)) +
geom_point(pch = 21, position=position_jitterdodge(dodge.width=0.4)) +
xlab("Bag") +
theme_classic(); plot2
data$treatment
metadata
View(data)
