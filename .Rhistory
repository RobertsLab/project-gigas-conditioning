knitr::opts_chunk$set(echo = TRUE)
dat <- Sys.Date() #set todays date
#today <- gsub('-', '', dat)
time <- Sys.time()
time <- gsub(":" ,"_",time)
time <- gsub(" " ,"_",time)
#HST <- force_tz(HST, format= %h:%m:%s, tzone = "Pacific/Honolulu")
today <- sub('..', '', dat)
today <- gsub('-', '', today)
today <- as.numeric(today)-1
library("XML")
library("plyr")
library("lubridate")
xmlfile5 <- xmlParse("http://192.168.10.131/cgi-bin/datalog.xml?sdate=240501&days=30") #read in the date (e.g. 240301) plus # days (e.g. days=103) of Apex data
parsed5 <- ldply(xmlToList(xmlfile5), data.frame) #convert xml to dataframe
write.csv(parsed5, "data/environmental/apex/indoor_tanks_20240501_20240601.csv") #write file to save data
# B survival
B_survival_06202024 <- read_excel("data/survival/Westcott/B_survival_06202024.xlsx")
library(readxl)
library(tidyverse)
library(ggplot2)
# B survival
B_survival_06202024 <- read_excel("data/survival/Westcott/B_survival_06202024.xlsx")
B_survival_06252024 <- read_excel("data/survival/Westcott/B_survival_06252024.xlsx")
# D survival
D_survival_06202024 <- read_excel("data/survival/Westcott/D_survival_06202024.xlsx")
D_survival_06252024 <- read_excel("data/survival/Westcott/D_survival_06252024.xlsx")
View(D_survival_06202024)
View(B_survival_06202024)
View(B_survival_06252024)
View(D_survival_06252024)
B_live <- bind_cols(bag_num = B_survival_06202024$bag_num,
alive_1 = B_survival_06202024$alive_num,
alive_2 = B_survival_06252024$alive_num)
D_live <- bind_cols(bag_num = D_survival_06202024$bag_num,
alive_1 = D_survival_06202024$alive_num,
alive_2 = D_survival_06252024$alive_num)
View(B_live)
View(D_live)
mean(subset(B_live, bag_num < 6, select = c(bag_num, alive_1, alive_2)))
subset(B_live, bag_num < 6, select = c(bag_num, alive_1, alive_2))
B_control <- subset(B_live, bag_num < 6, select = c(bag_num, alive_1, alive_2))
B_live_control <- subset(B_live, bag_num < 6, select = c(bag_num, alive_1, alive_2))
B_live_treated <- subset(B_live, bag_num > 6, select = c(bag_num, alive_1, alive_2))
View(B_live_treated)
B_live_treated <- subset(B_live, bag_num >= 6, select = c(bag_num, alive_1, alive_2))
View(B_live_treated)
mean(B_live_control$alive_1)
mean(B_live_control$alive_2)
D_live_control <- subset(D_live, bag_num < 22, select = c(bag_num, alive_1, alive_2))
D_live_treated <- subset(D_live, bag_num >= 22, select = c(bag_num, alive_1, alive_2))
View(D_live_control)
View(D_live_treated)
mean(B_live_treated$alive_1) # 48.8
mean(B_live_treated$alive_2) # 49
mean(D_live_control$alive_1) # 48.8
mean(D_live_control$alive_2) # 49
mean(D_live_treated$alive_1) # 47.2
mean(D_live_treated$alive_2) # 48.4
survival <- matrix(rep(NA), ncol = 2, nrow=4)
View(survival)
colnames(survival) <- c("1","2")
rownames(survival) <- c("B_control", "B_treated", "D_control", "D_treated")
View(survival)
survival[1,1] <- mean(B_live_control$alive_1)
survival[1,2] <- mean(B_live_control$alive_2)
survival[2,1] <- mean(B_live_treated$alive_1)
survival[2,2] <- mean(B_live_treated$alive_2)
survival[3,1] <- mean(D_live_control$alive_1)
survival[3,2] <- mean(D_live_control$alive_2)
survival[4,1] <- mean(D_live_treated$alive_1
survival[4,2] <- mean(D_live_treated$alive_2)
survival[4,1] <- mean(D_live_treated$alive_1)
survival[4,2] <- mean(D_live_treated$alive_2)
View(survival)
survival <- t(survival)
View(survival)
library(readxl)
library(tidyverse)
library(ggplot2)
# B survival
B_survival_06202024 <- read_excel("data/survival/Westcott/B_survival_06202024.xlsx")
# B survival
B_survival_06202024 <- read_excel("data/survival/Westcott/B_survival_06202024.xlsx")
B_survival_06252024 <- read_excel("data/survival/Westcott/B_survival_06252024.xlsx")
# D survival
D_survival_06202024 <- read_excel("data/survival/Westcott/D_survival_06202024.xlsx")
D_survival_06252024 <- read_excel("data/survival/Westcott/D_survival_06252024.xlsx")
View(D_live_control)
live <- rbind(B_live, D_live)
View(live)
live$treatment
View(live)
live$treatment <- NA
View(live)
for (i in length(live$treatment)){
if (live$bag_num[i] < 6) {
live$treatment[i] == b_control
}
if (live$bag_num[i] >= 6 | live$bag_num[i] < 11){
live$treatment[i] == b_treated
}
if (live$bag_num[i] >= 11 | live$bag_num[i] < 22){
live$treatment[i] == d_control
}
if (live$bag_num[i] >= 22){
live$treatment[i] == d_treated
}
}
for (i in length(live$treatment)){
if (live$bag_num[i] < 6) {
live$treatment[i] <- "b_control"
}
if (live$bag_num[i] >= 6 | live$bag_num[i] < 11){
live$treatment[i] <- "b_treated"
}
if (live$bag_num[i] >= 11 | live$bag_num[i] < 22){
live$treatment[i] <- "d_control"
}
if (live$bag_num[i] >= 22){
live$treatment[i] <- "d_treated"
}
}
View(live)
for (i in 1:length(live$treatment)){
if (live$bag_num[i] < 6) {
live$treatment[i] <- "b_control"
}
if (live$bag_num[i] >= 6 | live$bag_num[i] < 11){
live$treatment[i] <- "b_treated"
}
if (live$bag_num[i] >= 11 | live$bag_num[i] < 22){
live$treatment[i] <- "d_control"
}
if (live$bag_num[i] >= 22){
live$treatment[i] <- "d_treated"
}
}
View(live)
for (i in 1:length(live$treatment)){
if (live$bag_num[i] < 6) {
live$treatment[i] <- "b_control"
}
if (live$bag_num[i] >= 6 & live$bag_num[i] < 11){
live$treatment[i] <- "b_treated"
}
if (live$bag_num[i] >= 11 & live$bag_num[i] < 22){
live$treatment[i] <- "d_control"
}
if (live$bag_num[i] >= 22){
live$treatment[i] <- "d_treated"
}
}
View(B_survival_06202024)
# B survival
B_survival_06202024 <- read_excel("data/survival/Westcott/B_survival_06202024.xlsx")
getwd()
# B survival
B_survival_06202024 <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/B_survival_06202024.xlsx")
library(readxl)
library(tidyverse)
library(ggplot2)
# B survival
B_survival_06202024 <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/B_survival_06202024.xlsx")
B_survival_06252024 <- read_excel("data/survival/Westcott/B_survival_06252024.xlsx")
B_survival_06252024 <- read_excel("/data/survival/Westcott/B_survival_06252024.xlsx")
B_survival_06252024 <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/B_survival_06252024.xlsx")
# D survival
D_survival_06202024 <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/D_survival_06202024.xlsx")
D_survival_06252024 <- read_excel("/Users/graceleuchtenberger/Library/Mobile Documents/com~apple~CloudDocs/Documents/project-gigas-conditioning-GL/data/survival/Westcott/D_survival_06252024.xlsx")
B_live <- bind_cols(bag_num = B_survival_06202024$bag_num,
alive_1 = B_survival_06202024$alive_num,
alive_2 = B_survival_06252024$alive_num)
D_live <- bind_cols(bag_num = D_survival_06202024$bag_num,
alive_1 = D_survival_06202024$alive_num,
alive_2 = D_survival_06252024$alive_num)
live <- rbind(B_live, D_live)
View(B_survival_06202024)
live$treatment <- NA
for (i in 1:length(live$treatment)){
if (live$bag_num[i] < 6) {
live$treatment[i] <- "b_control"
}
if (live$bag_num[i] >= 6 & live$bag_num[i] < 11){
live$treatment[i] <- "b_treated"
}
if (live$bag_num[i] >= 11 & live$bag_num[i] < 22){
live$treatment[i] <- "d_control"
}
if (live$bag_num[i] >= 22){
live$treatment[i] <- "d_treated"
}
}
live <- live %>%
pivot_longer(cols = c(alive_1, alive_2), names_to = "time_points", values_to = "live_oysters")
View(B_live_control)
View(D_live)
means_live <- live %>%
group_by(treatment, time_points) %>%
summarize(mean_live = mean(live_oysters, na.rm = TRUE))
View(means_live)
ggplot(means_live, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(title = "Mean live oysters per bag over time",
x = "Time Point",
y = "Mean live oysters per bag") +
theme_minimal()
ggplot(means_live, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(title = "Mean live oysters per bag over time",
x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()
B_means <- means_live %>%
filter(treatment %in% c("b_control", "b_treated"))
View(B_means)
ggplot(B_means, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(title = "Mean live oysters per bag over time",
x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()
ggplot(B_means, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(title = "Mean live oysters per bag over time",
x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()+
ylim(0,55)
ggplot(B_means, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(title = "Mean live oysters per bag over time",
x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()+
ylim(0,60)
ggplot(B_means, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()+
ylim(0,60)
D_means <- means_live %>%
filter(treatment %in% c("d_control", "d_treated"))
ggplot(B_means, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()+
ylim(0,60)
ggplot(D_means, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()+
ylim(0,60)
ggplot(D_means, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()+
ylim(0,105)
View(D_live)
View(D_means)
ggplot(means_live, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(title = "Mean live oysters per bag over time",
x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()+
ylim(0,105)
ggplot(means_live, aes(x = time_points, y = mean_live, group = treatment, color = treatment)) +
geom_line() +
geom_point() +
labs(x = "Time Point",
y = "Mean live oysters per bag") +
theme_classic()+
ylim(0,105)
