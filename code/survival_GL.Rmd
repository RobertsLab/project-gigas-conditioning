---
title: "Survival_analysis"
output: html_document
date: "2024-06-26"
---

### Load libraries
```{r}
library(readxl)
library(tidyverse)
library(ggplot2)
```

### Load Data
```{r}
# B survival
B_survival_06202024 <- read_excel("data/survival/Westcott/B_survival_06202024.xlsx")
B_survival_06252024 <- read_excel("data/survival/Westcott/B_survival_06252024.xlsx")

# D survival
D_survival_06202024 <- read_excel("data/survival/Westcott/D_survival_06202024.xlsx")
D_survival_06252024 <- read_excel("data/survival/Westcott/D_survival_06252024.xlsx")
```

### Combine data
```{r}
B_live <- bind_cols(bag_num = B_survival_06202024$bag_num,
               alive_1 = B_survival_06202024$alive_num,
               alive_2 = B_survival_06252024$alive_num)

D_live <- bind_cols(bag_num = D_survival_06202024$bag_num,
               alive_1 = D_survival_06202024$alive_num,
               alive_2 = D_survival_06252024$alive_num)

```

### Stats
```{r}
B_live_control <- subset(B_live, bag_num < 6, select = c(bag_num, alive_1, alive_2))
B_live_treated <- subset(B_live, bag_num >= 6, select = c(bag_num, alive_1, alive_2))

D_live_control <- subset(D_live, bag_num < 22, select = c(bag_num, alive_1, alive_2))
D_live_treated <- subset(D_live, bag_num >= 22, select = c(bag_num, alive_1, alive_2))

survival <- matrix(rep(NA), ncol = 2, nrow=4)
colnames(survival) <- c("1","2")
rownames(survival) <- c("B_control", "B_treated", "D_control", "D_treated")
survival[1,1] <- mean(B_live_control$alive_1) 
survival[1,2] <- mean(B_live_control$alive_2)
survival[2,1] <- mean(B_live_treated$alive_1)
survival[2,2] <- mean(B_live_treated$alive_2)
survival[3,1] <- mean(D_live_control$alive_1)
survival[3,2] <- mean(D_live_control$alive_2)
survival[4,1] <- mean(D_live_treated$alive_1)
survival[4,2] <- mean(D_live_treated$alive_2)

survival <- t(survival)



```

